import{_ as Bt}from"../chunks/preload-helper.41c905a7.js";import{S as Ee,i as Pe,s as Se,k as q,q as x,a as Y,l as A,m as C,r as ee,h as m,c as Q,n as h,b as P,G as M,u as be,H as j,I as ne,o as Ke,R as se,L as Ve,M as K,T as Qe,N as ze,j as zt,U as qt,e as W,J as qe,V as We,W as Fe,w as we,K as Xe,g as O,v as fe,d as U,f as ue,y as he,z as me,A as pe,B as ge,X as ye,Y as Ie,Z as He,_ as Ft,O as Gt,p as je}from"../chunks/index.7c5e5199.js";import{b as ce,m as Ut,e as Wt,t as De,a as Le,i as Be,c as Xt}from"../chunks/setup.158a0fb1.js";import{w as ve}from"../chunks/singletons.79350fe2.js";import{p as Ht}from"../chunks/stores.8d4a2224.js";const Jt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/template.md":()=>Bt(()=>import("../chunks/template.82fa4da5.js"),["../chunks/template.82fa4da5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const i=await s(),{html:a}=i.default.render(),r=t.slice(17,-3),u=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...a.matchAll(u)].map(o=>o[2]).filter(o=>!o.startsWith("http")).map(o=>{const f=o.lastIndexOf("/");return f!==-1?o.substring(f+1):o});return{meta:i.metadata,path:r,text:a,links:c}}))},Yt=async({fetch:n})=>({posts:await(await n("/api/posts")).json()}),Qt=!0,Zt=async()=>(await Jt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Ql=Object.freeze(Object.defineProperty({__proto__:null,entries:Zt,load:Yt,prerender:Qt},Symbol.toStringTag,{value:"Module"})),Ze=ve(""),Je=ve(""),Ne=ve(!1),$e=ve([]),de=ve([]),Ge=ve([]),Ue=ve(0);function xe(n){let e,l=n[0].meta.author+"",t;return{c(){e=q("div"),t=x(l),this.h()},l(s){e=A(s,"DIV",{class:!0});var i=C(e);t=ee(i,l),i.forEach(m),this.h()},h(){h(e,"class","author svelte-tmt4fa")},m(s,i){P(s,e,i),M(e,t)},p(s,i){i&1&&l!==(l=s[0].meta.author+"")&&be(t,l)},d(s){s&&m(e)}}}function et(n){var s;let e,l=((s=new Date(n[0].meta.date))==null?void 0:s.toLocaleDateString(n[0].meta.lang))+"",t;return{c(){e=q("div"),t=x(l),this.h()},l(i){e=A(i,"DIV",{class:!0});var a=C(e);t=ee(a,l),a.forEach(m),this.h()},h(){h(e,"class","date svelte-tmt4fa")},m(i,a){P(i,e,a),M(e,t)},p(i,a){var r;a&1&&l!==(l=((r=new Date(i[0].meta.date))==null?void 0:r.toLocaleDateString(i[0].meta.lang))+"")&&be(t,l)},d(i){i&&m(e)}}}function Rt(n){var f,_;let e,l=n[0].meta.title+"",t,s,i,a,r,u,c=((f=n[0].meta)==null?void 0:f.author)&&xe(n),o=((_=n[0].meta)==null?void 0:_.date)&&et(n);return{c(){e=q("h1"),t=x(l),s=Y(),i=q("div"),c&&c.c(),a=Y(),o&&o.c(),r=Y(),u=q("div"),this.h()},l(d){e=A(d,"H1",{class:!0});var I=C(e);t=ee(I,l),I.forEach(m),s=Q(d),i=A(d,"DIV",{class:!0});var T=C(i);c&&c.l(T),a=Q(T),o&&o.l(T),T.forEach(m),r=Q(d),u=A(d,"DIV",{class:!0});var N=C(u);N.forEach(m),this.h()},h(){h(e,"class","svelte-tmt4fa"),h(i,"class","metadata svelte-tmt4fa"),h(u,"class","markdown svelte-tmt4fa")},m(d,I){P(d,e,I),M(e,t),P(d,s,I),P(d,i,I),c&&c.m(i,null),M(i,a),o&&o.m(i,null),P(d,r,I),P(d,u,I),u.innerHTML=n[1]},p(d,[I]){var T,N;I&1&&l!==(l=d[0].meta.title+"")&&be(t,l),(T=d[0].meta)!=null&&T.author?c?c.p(d,I):(c=xe(d),c.c(),c.m(i,a)):c&&(c.d(1),c=null),(N=d[0].meta)!=null&&N.date?o?o.p(d,I):(o=et(d),o.c(),o.m(i,null)):o&&(o.d(1),o=null)},i:j,o:j,d(d){d&&m(e),d&&m(s),d&&m(i),c&&c.d(),o&&o.d(),d&&m(r),d&&m(u)}}}const Kt=/\[\^([^\]]+)\]/g;let jt=100;function $t(n){const e=n.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),n.currentTarget.classList.add("hover")}function xt(n){const e=n.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),n.currentTarget.classList.remove("hover")}function el(n,e,l){const t=l-e;return(n-e)/t*100}function tl(n,e,l){const t=l-e;return e+t*n/100}function ll(n,e,l){let t,s;ne(n,Ne,p=>l(8,t=p)),ne(n,Ze,p=>l(9,s=p));let{data:i}=e,{items:a}=e,{scrollTopVal:r}=e,u=i.text,c=1;const f=u.replace(/<a\s+href="([^"]+)"\s*>([^<]+)<\/a>/g,(p,b,y)=>{if(b.startsWith("http"))return`<a class="external" target="_blank" href="${b}" title="${y}">${y}</a>`;{let w=b.split("/")[1];return`<a class="node-highlite" unique-id="${w}" id="${b.split("/")[1]}"
				data-id="${b.split("/")[1]}" title="${y}">${y}
				<span class="symbol node" unique-id="${w}" data-id="item_${b.split("/")[1]}"
				data-class="${a.filter(E=>E.label==y).map(E=>{var D,G;return(G=(D=E.data)==null?void 0:D["@type"])==null?void 0:G[1]})}">
					●
					</span></a>`}}).replace(Kt,(p,b)=>{const y=c++;return`<sup id="fn-${y}"><a href="#fnref-${y}">${y}</a></sup><span id="fn-${y}-content">${b}</span>`}),_=Array.from({length:c-1},(p,b)=>{var E;const y=b+1,w=(E=f.match(new RegExp(`<span id="fn-${y}-content">([^<]+)</span>`)))==null?void 0:E[1];return`<li id="fnref-${y}"> ${w}</li>`}).join(""),d=`${f}
	<ol class="biblio">${_}</ol>`;let I;Ke(async()=>{l(4,I=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),N(I),I.forEach(p=>{p.addEventListener("mouseenter",$t),p.addEventListener("mouseleave",xt),p.addEventListener("click",T)})});function T(p){I.forEach(w=>{const E=w.getAttribute("data-id"),D=document.querySelector(`.node[data-id="${E}"]`);D&&D.classList.remove("clicked"),w.classList.remove("clicked")});const b=p.currentTarget.getAttribute("data-id"),y=document.querySelector(`.node[data-id="${b}"]`);y&&y.classList.toggle("clicked"),p.currentTarget.classList.toggle("clicked"),se(Ze,s=b,s)}function N(p){let b=null;l(4,I=Array.from(p).map(y=>{let w=y.offsetTop;return b!==null&&w<=b?y.adjustedOffsetTop=b+jt:y.adjustedOffsetTop=w,b=y.adjustedOffsetTop,y}))}let L=0;function V(p,b){var y,w,E,D,G,F;if(!t){let S=(y=p==null?void 0:p[L])==null?void 0:y.adjustedOffsetTop,X=(w=p==null?void 0:p[L+1])==null?void 0:w.adjustedOffsetTop,Z=(E=p==null?void 0:p[L])==null?void 0:E.getAttribute("data-id"),le=(D=p==null?void 0:p[L+1])==null?void 0:D.getAttribute("data-id"),B=(G=document.querySelector(`.node[data-id="${Z}"]`))==null?void 0:G.offsetTop,$=(F=document.querySelector(`.node[data-id="${le}"]`))==null?void 0:F.offsetTop,g=el(b,S,X),v=tl(g,B,$);b>X&&L++,b<S&&L!=0&&L--;const k=document.querySelector(".links:first-of-type");S&&X&&k&&g&&v&&(k==null||k.scrollTo({top:v}))}}return n.$$set=p=>{"data"in p&&l(0,i=p.data),"items"in p&&l(2,a=p.items),"scrollTopVal"in p&&l(3,r=p.scrollTopVal)},n.$$.update=()=>{n.$$.dirty&24&&V(I,r)},[i,d,a,r,I]}class sl extends Ee{constructor(e){super(),Pe(this,e,ll,Rt,Se,{data:0,items:2,scrollTopVal:3})}}function tt(n,e,l){const t=n.slice();return t[27]=e[l],t}function nl(n){let e,l=(n[0].title||"")+"",t;return{c(){e=q("div"),t=x(l),this.h()},l(s){e=A(s,"DIV",{class:!0});var i=C(e);t=ee(i,l),i.forEach(m),this.h()},h(){h(e,"class","title svelte-x5b8hf")},m(s,i){P(s,e,i),M(e,t)},p(s,i){i&1&&l!==(l=(s[0].title||"")+"")&&be(t,l)},d(s){s&&m(e)}}}function il(n){let e,l,t,s,i,a=(n[0].title||"")+"",r,u,c;return{c(){e=q("img"),s=Y(),i=q("div"),r=x(a),this.h()},l(o){e=A(o,"IMG",{src:!0,alt:!0,class:!0}),s=Q(o),i=A(o,"DIV",{class:!0});var f=C(i);r=ee(f,a),f.forEach(m),this.h()},h(){Xe(e.src,l=n[5])||h(e,"src",l),h(e,"alt",t=n[0].title),h(e,"class","svelte-x5b8hf"),h(i,"class","title svelte-x5b8hf")},m(o,f){P(o,e,f),P(o,s,f),P(o,i,f),M(i,r),u||(c=K(e,"load",n[11]),u=!0)},p(o,f){f&32&&!Xe(e.src,l=o[5])&&h(e,"src",l),f&1&&t!==(t=o[0].title)&&h(e,"alt",t),f&1&&a!==(a=(o[0].title||"")+"")&&be(r,a)},d(o){o&&m(e),o&&m(s),o&&m(i),u=!1,c()}}}function al(n){let e,l,t,s,i,a=n[0].title+"",r,u,c;return{c(){e=q("img"),s=Y(),i=q("div"),r=x(a),this.h()},l(o){e=A(o,"IMG",{src:!0,alt:!0,class:!0}),s=Q(o),i=A(o,"DIV",{class:!0});var f=C(i);r=ee(f,a),f.forEach(m),this.h()},h(){Xe(e.src,l=n[0].img.replace("square","large"))||h(e,"src",l),h(e,"alt",t=n[0].title),h(e,"class","svelte-x5b8hf"),h(i,"class","title svelte-x5b8hf")},m(o,f){P(o,e,f),P(o,s,f),P(o,i,f),M(i,r),u||(c=K(e,"load",n[11]),u=!0)},p(o,f){f&1&&!Xe(e.src,l=o[0].img.replace("square","large"))&&h(e,"src",l),f&1&&t!==(t=o[0].title)&&h(e,"alt",t),f&1&&a!==(a=o[0].title+"")&&be(r,a)},d(o){o&&m(e),o&&m(s),o&&m(i),u=!1,c()}}}function lt(n){let e,l=n[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=st(tt(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=W()},m(s,i){for(let a=0;a<t.length;a+=1)t[a].m(s,i);P(s,e,i)},p(s,i){if(i&256){l=s[8].essays;let a;for(a=0;a<l.length;a+=1){const r=tt(s,l,a);t[a]?t[a].p(r,i):(t[a]=st(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){qe(t,s),s&&m(e)}}}function st(n){let e,l,t,s=n[27].title+"",i,a;return{c(){e=q("a"),l=x("→"),t=q("em"),i=x(s),this.h()},l(r){e=A(r,"A",{class:!0,href:!0,target:!0,rel:!0});var u=C(e);l=ee(u,"→"),t=A(u,"EM",{});var c=C(t);i=ee(c,s),c.forEach(m),u.forEach(m),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",a=n[27].url),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(r,u){P(r,e,u),M(e,l),M(e,t),M(t,i)},p(r,u){u&256&&s!==(s=r[27].title+"")&&be(i,s),u&256&&a!==(a=r[27].url)&&h(e,"href",a)},d(r){r&&m(e)}}}function nt(n){let e;function l(i,a){return i[0].title==null||i[0].title.length==1?ol:rl}let t=l(n),s=t(n);return{c(){s.c(),e=W()},l(i){s.l(i),e=W()},m(i,a){s.m(i,a),P(i,e,a)},p(i,a){t===(t=l(i))&&s?s.p(i,a):(s.d(1),s=t(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){s.d(i),i&&m(e)}}}function rl(n){let e,l,t;return{c(){e=q("a"),l=x("→ Metadata"),this.h()},l(s){e=A(s,"A",{class:!0,href:!0,target:!0,rel:!0});var i=C(e);l=ee(i,"→ Metadata"),i.forEach(m),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",t=`${n[3]}/item/${n[4]}`),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(s,i){P(s,e,i),M(e,l)},p(s,i){i&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&h(e,"href",t)},d(s){s&&m(e)}}}function ol(n){let e,l,t;return{c(){e=q("a"),l=x("→ Metadata"),this.h()},l(s){e=A(s,"A",{class:!0,href:!0,target:!0,rel:!0});var i=C(e);l=ee(i,"→ Metadata"),i.forEach(m),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",t=`${n[3]}/media/${n[4]}`),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(s,i){P(s,e,i),M(e,l)},p(s,i){i&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&h(e,"href",t)},d(s){s&&m(e)}}}function fl(n){let e,l,t,s,i,a;function r(_,d){return _[0].img?al:_[5]?il:nl}let u=r(n),c=u(n),o=n[8]!=null&&lt(n),f=n[3]&&nt(n);return{c(){e=q("div"),c.c(),l=Y(),o&&o.c(),t=Y(),f&&f.c(),this.h()},l(_){e=A(_,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=C(e);c.l(d),l=Q(d),o&&o.l(d),t=Q(d),f&&f.l(d),d.forEach(m),this.h()},h(){h(e,"class","node svelte-x5b8hf"),h(e,"title",s=n[0].title),h(e,"source",n[9]),h(e,"target",n[4]),h(e,"data-id",n[4]),Ve(e,"selected",n[7]),Ve(e,"linkToEssay",n[8]!=null)},m(_,d){P(_,e,d),c.m(e,null),M(e,l),o&&o.m(e,null),M(e,t),f&&f.m(e,null),n[21](e),i||(a=[K(e,"mouseover",n[22]),K(e,"mouseleave",function(){Qe(n[13](n[4]))&&n[13](n[4]).apply(this,arguments)}),K(e,"click",n[18]),K(e,"keydown",n[19]),K(e,"focus",n[20])],i=!0)},p(_,[d]){n=_,u===(u=r(n))&&c?c.p(n,d):(c.d(1),c=u(n),c&&(c.c(),c.m(e,l))),n[8]!=null?o?o.p(n,d):(o=lt(n),o.c(),o.m(e,t)):o&&(o.d(1),o=null),n[3]?f?f.p(n,d):(f=nt(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&1&&s!==(s=n[0].title)&&h(e,"title",s),d&512&&h(e,"source",n[9]),d&16&&h(e,"target",n[4]),d&16&&h(e,"data-id",n[4]),d&128&&Ve(e,"selected",n[7]),d&256&&Ve(e,"linkToEssay",n[8]!=null)},i:j,o:j,d(_){_&&m(e),c.d(),o&&o.d(),f&&f.d(),n[21](null),i=!1,ze(a)}}}function ul(n,e,l){let t,s,i,a,r,u,c=j,o=()=>(c(),c=We(L,v=>l(17,u=v)),L),f,_=j,d=()=>(_(),_=We(V,v=>l(24,f=v)),V),I,T;ne(n,de,v=>l(16,r=v)),ne(n,Ze,v=>l(25,I=v)),ne(n,Je,v=>l(10,T=v)),n.$$.on_destroy.push(()=>c()),n.$$.on_destroy.push(()=>_());let{datum:N}=e,{entities:L}=e;o();let{updatePosition:V}=e;d();let{essaysItems:p}=e,{site:b}=e,{openNode:y}=e,w,E=null;zt(()=>{const v=N.source;v==`item_${I}`&&v!=E&&y(N,1),E=`item_${I}`}),qt(()=>{se(V,f=!0,f)});function D(){se(V,f=!0,f)}function G(v){var J;const k=v.split("/"),z=u.find(ie=>ie["o:id"]==k.slice(-1)[0]);return(J=z==null?void 0:z.thumbnail_display_urls)==null?void 0:J.large}let F;function S(v){const k=v,z=document.querySelector(`.node-highlite[data-id="${k}"]`);z&&z.classList.add("hover"),F.classList.add("hover")}function X(v){const k=v,z=document.querySelector(`.node-highlite[data-id="${k}"]`);z&&z.classList.remove("hover"),F.classList.remove("hover")}function Z(v){Fe.call(this,n,v)}function le(v){Fe.call(this,n,v)}function B(v){Fe.call(this,n,v)}function $(v){we[v?"unshift":"push"](()=>{F=v,l(6,F)})}const g=()=>{se(Je,T=s,T),S(s)};return n.$$set=v=>{"datum"in v&&l(0,N=v.datum),"entities"in v&&o(l(1,L=v.entities)),"updatePosition"in v&&d(l(2,V=v.updatePosition)),"essaysItems"in v&&l(14,p=v.essaysItems),"site"in v&&l(3,b=v.site),"openNode"in v&&l(15,y=v.openNode)},n.$$.update=()=>{n.$$.dirty&131073&&u&&l(5,w=G(N.target)),n.$$.dirty&1&&l(9,t=N.source.split("/").slice(-1)[0]),n.$$.dirty&1&&l(4,s=N.target.split("/").slice(-1)[0]),n.$$.dirty&16400&&l(8,i=p.find(v=>v.id==s)),n.$$.dirty&65537&&l(7,a=r.some(v=>(v==null?void 0:v.id)==N.target))},[N,L,V,b,s,w,F,a,i,t,T,D,S,X,p,y,r,u,Z,le,B,$,g]}class At extends Ee{constructor(e){super(),Pe(this,e,ul,fl,Se,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var cl=0;function dl(){return++cl}var Re=Function("return this")();typeof Re.__nextId!="function"&&(Re.__nextId=dl);function Mt(){return"uid-"+Re.__nextId()}function _l(n){let e,l,t;return{c(){e=q("div"),this.h()},l(s){e=A(s,"DIV",{source:!0,target:!0}),C(e).forEach(m),this.h()},h(){h(e,"source",l=n[0].source.split("/").slice(-1)[0]),h(e,"target",t=n[0].target.split("/").slice(-1)[0])},m(s,i){P(s,e,i),n[8](e)},p(s,[i]){i&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&h(e,"source",l),i&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&h(e,"target",t)},i:j,o:j,d(s){s&&m(e),n[8](null)}}}let it=0;function hl(n,e,l){let t,s,i,a,r=j,u=()=>(r(),r=We(d,p=>l(5,a=p)),d),c,o;ne(n,Ge,p=>l(12,i=p)),ne(n,Ue,p=>l(6,c=p)),ne(n,de,p=>l(7,o=p)),n.$$.on_destroy.push(()=>r());let{datum:f}=e,{label:_}=e,{updatePosition:d}=e;u();let I,T=Mt();function N(p,b=0,y){const w=p.split("/").slice(-1)[0],E=[...document.querySelectorAll(`.node[data-id="${w}"]`)],D=[];return E.forEach(G=>{const F=G.getBoundingClientRect(),S={x:F.x+c,y:F.y+b,width:F.width-b/2,height:F.height,selected:"selected"};D.push(S)}),D}function L(){delete i[T],se(d,a=!1,a);const p=N(f.source,it),b=N(f.target,it);I&&(I.getBoundingClientRect().x,I.getBoundingClientRect().y),p.forEach(y=>{b.forEach(w=>{let E=100;const D=y==null?void 0:y.selected;let G,F,S,X,Z;G=y.x+y.width,F=y.y,S=w.x,X=w.y,w.x<y.x||w.x==y.x?Z=w.x-E*5:w.x==y.x?Z=w.x-E*3:Z=w.x-E,f.source.includes("item_")&&(Z=w.x-E);const le=G+E,B=F,$=w.y,g=`M${G},${F}C${le},${B} ${Z},${$} ${S},${X}`;se(Ge,i[T]=i[T]||[],i),i[T].push({class:s,d:g,label:_,selected:D,datum:{source:f.source.split("/").at(-1),target:f.target.split("/").at(-1)},reverse:f==null?void 0:f.reverse})})})}qt(()=>{delete i[T],se(Ge,i=[],i)});function V(p){we[p?"unshift":"push"](()=>{I=p,l(2,I)})}return n.$$set=p=>{"datum"in p&&l(0,f=p.datum),"label"in p&&l(3,_=p.label),"updatePosition"in p&&u(l(1,d=p.updatePosition))},n.$$.update=()=>{n.$$.dirty&96&&L(),n.$$.dirty&128&&l(4,t=o.slice(-1)[0].id),n.$$.dirty&17&&(s=f.target==t||f.source==t?"highlite":"")},[f,d,I,_,t,a,c,o,V]}class Ot extends Ee{constructor(e){super(),Pe(this,e,hl,_l,Se,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function ml(n){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],i=[];let a;for(;a=e.exec(n);)if(!a[2].includes("http")){const p=a[3],b=a[2];b.includes("item/")&&l.push(b.split("/")[1]),b.includes("set/")&&s.push(b.split("/")[1]),b.includes("media/")&&t.push(b.split("/")[1]),i.push({label:p,id:b.split("/")[1]})}const r=Wt,c=V(l,r).map(p=>{const b=`${ce}/items?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),f=V(s,r).map(p=>{const b=`${ce}/item_sets?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),d=V(t,r).map(p=>{const b=`${ce}/media?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(b).then(y=>y.json())}),I=await Promise.all(c),T=await Promise.all(f),N=await Promise.all(d),L=[...I.flat(),...N.flat(),...T.flat()];for(let p=0;p<L.length;p++){const b=i.find(w=>L[p]["o:id"]==w.id),y=L[p];b.uniqueId=Mt(),b.data=y}return i;function V(p,b){const y=[];for(let w=0;w<p.length;w+=b)y.push(p.slice(w,w+b));return y}}async function Ct(n){let e=[];for(let t=0;t<n.length;t++)if(n[t].data){let s=n[t].data,i=n[t].set||null,a=pl(s,i);e=[...e,...a]}return{...{nodes:e.reduce((t,s)=>(t.find(i=>i.id===s.source)||t.push({id:s.source,title:s.title}),t.find(i=>i.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function pl(n,e){var u;let l=[],t=`${ce}/resources/${n["o:id"]}`;e&&l.push({source:`${ce}/resources/${e.id}`,target:t,img:(u=n==null?void 0:n.thumbnail_display_urls)==null?void 0:u.large,title:n["o:title"]});let s,i=!1;const a=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let r=async function(c){var o,f,_,d,I,T,N,L,V,p,b,y;for(let w in c)if(w==="@id"&&c[w].startsWith(ce)&&(c["o:title"]||c.display_title||i==!0)){let E=c[w].split("/").pop(),D=`${ce}/resources/${E}`;const G=c["o:title"]||c.display_title,F=(c==null?void 0:c.thumbnail_url)||((o=c==null?void 0:c.thumbnail_display_urls)==null?void 0:o.large),S=l.some(le=>le.source===t&&le.target===D);let X=((_=(f=c.property_label)==null?void 0:f.replace("_"," "))==null?void 0:_.replace(a,""))||(s==null?void 0:s.replace(a,""));const Z=Ut.map(le=>le.props.includes(X)?le.key:"").find(Boolean);S||l.push({source:t,target:D,title:G,img:F,property:X,category:Z,reverse:i})}else if(w==="@id"&&!c[w].startsWith(ce)&&c["o:label"]){let E=((I=(d=c.property_label)==null?void 0:d.replace("_"," "))==null?void 0:I.replace(a,""))||(s==null?void 0:s.replace(a,""));l.push({source:t,target:c[w],title:c["o:label"],property:E,category:"",external:!0,reverse:i})}else if(w==="@id"&&s=="media"&&t.split("/").pop()!=((T=c==null?void 0:c["o:primary_media"])==null?void 0:T["@id"].split("/").pop())){let E=((L=(N=c.property_label)==null?void 0:N.replace("_"," "))==null?void 0:L.replace(a,""))||(s==null?void 0:s.replace(a,"")),D=c[w].split("/").pop(),G=`${ce}/resources/${D}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:i})}else if(w==="@id"&&s=="item"){let E=((p=(V=c.property_label)==null?void 0:V.replace("_"," "))==null?void 0:p.replace(a,""))||(s==null?void 0:s.replace(a,"")),D=c[w].split("/").pop(),G=`${ce}/resources/${D}`;l.push({source:t,target:G,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:i})}else typeof c[w]=="object"&&(isNaN(w)&&(s=(y=(b=(w==null?void 0:w.split(":"))[1])==null?void 0:b.split("_"))==null?void 0:y.join(" "),w=="@reverse"&&(i=!0)),r(c[w]))};return r(n),l}function at(n,e,l){const t=n.slice();return t[22]=e[l],t}function rt(n){let e,l;return{c(){e=q("div"),l=x("Loading..."),this.h()},l(t){e=A(t,"DIV",{class:!0});var s=C(e);l=ee(s,"Loading..."),s.forEach(m),this.h()},h(){h(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),M(e,l)},d(t){t&&m(e)}}}function ot(n){let e,l,t=n[0],s=[];for(let a=0;a<t.length;a+=1)s[a]=ut(at(n,t,a));const i=a=>U(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let u=0;u<s.length;u+=1)s[u].m(a,r);P(a,e,r),l=!0},p(a,r){if(r&639){t=a[0];let u;for(u=0;u<t.length;u+=1){const c=at(a,t,u);s[u]?(s[u].p(c,r),O(s[u],1)):(s[u]=ut(c),s[u].c(),O(s[u],1),s[u].m(e.parentNode,e))}for(fe(),u=t.length;u<s.length;u+=1)i(u);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)O(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);l=!1},d(a){qe(s,a),a&&m(e)}}}function gl(n){var t;let e,l;return e=new Ot({props:{datum:n[22],updatePosition:n[3],label:((t=n[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,i){pe(e,s,i),l=!0},p(s,i){var r;const a={};i&1&&(a.datum=s[22]),i&8&&(a.updatePosition=s[3]),i&1&&(a.label=((r=s[22])==null?void 0:r.property)||""),e.$set(a)},i(s){l||(O(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){ge(e,s)}}}function bl(n){let e,l,t=n[22].source!=n[22].target&&ft(n);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,i){t&&t.m(s,i),P(s,e,i),l=!0},p(s,i){s[22].source!=s[22].target?t?(t.p(s,i),i&1&&O(t,1)):(t=ft(s),t.c(),O(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(O(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function ft(n){var c;let e,l,t,s,i;const a=[kl,vl],r=[];function u(o,f){var _;return(_=o[22])!=null&&_.external?1:0}return e=u(n),l=r[e]=a[e](n),s=new Ot({props:{datum:n[22],updatePosition:n[3],label:((c=n[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=Y(),he(s.$$.fragment)},l(o){l.l(o),t=Q(o),me(s.$$.fragment,o)},m(o,f){r[e].m(o,f),P(o,t,f),pe(s,o,f),i=!0},p(o,f){var I;let _=e;e=u(o),e===_?r[e].p(o,f):(fe(),U(r[_],1,1,()=>{r[_]=null}),ue(),l=r[e],l?l.p(o,f):(l=r[e]=a[e](o),l.c()),O(l,1),l.m(t.parentNode,t));const d={};f&1&&(d.datum=o[22]),f&8&&(d.updatePosition=o[3]),f&1&&(d.label=((I=o[22])==null?void 0:I.property)||""),s.$set(d)},i(o){i||(O(l),O(s.$$.fragment,o),i=!0)},o(o){U(l),U(s.$$.fragment,o),i=!1},d(o){r[e].d(o),o&&m(t),ge(s,o)}}}function vl(n){let e,l,t,s;return l=new At({props:{site:n[6],entities:n[2],updatePosition:n[3],datum:n[22],essaysItems:n[5],openNode:n[9]}}),{c(){e=q("a"),he(l.$$.fragment),this.h()},l(i){e=A(i,"A",{href:!0,target:!0,rel:!0});var a=C(e);me(l.$$.fragment,a),a.forEach(m),this.h()},h(){h(e,"href",t=n[22].target),h(e,"target","_blank"),h(e,"rel","noreferrer")},m(i,a){P(i,e,a),pe(l,e,null),s=!0},p(i,a){const r={};a&64&&(r.site=i[6]),a&4&&(r.entities=i[2]),a&8&&(r.updatePosition=i[3]),a&1&&(r.datum=i[22]),a&32&&(r.essaysItems=i[5]),l.$set(r),(!s||a&1&&t!==(t=i[22].target))&&h(e,"href",t)},i(i){s||(O(l.$$.fragment,i),s=!0)},o(i){U(l.$$.fragment,i),s=!1},d(i){i&&m(e),ge(l)}}}function kl(n){let e,l;function t(){return n[16](n[22])}function s(){return n[17](n[22])}return e=new At({props:{site:n[6],entities:n[2],updatePosition:n[3],datum:n[22],essaysItems:n[5],openNode:n[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(i){me(e.$$.fragment,i)},m(i,a){pe(e,i,a),l=!0},p(i,a){n=i;const r={};a&64&&(r.site=n[6]),a&4&&(r.entities=n[2]),a&8&&(r.updatePosition=n[3]),a&1&&(r.datum=n[22]),a&32&&(r.essaysItems=n[5]),e.$set(r)},i(i){l||(O(e.$$.fragment,i),l=!0)},o(i){U(e.$$.fragment,i),l=!1},d(i){ge(e,i)}}}function ut(n){let e,l,t,s,i;function a(...o){return n[15](n[22],...o)}const r=[bl,gl],u=[];function c(o,f){return f&3&&(e=null),e==null&&(e=!!o[1].some(a)),e?0:o[22].source&&o[22].target&&o[22].source!=o[22].target?1:-1}return~(l=c(n,-1))&&(t=u[l]=r[l](n)),{c(){t&&t.c(),s=W()},l(o){t&&t.l(o),s=W()},m(o,f){~l&&u[l].m(o,f),P(o,s,f),i=!0},p(o,f){n=o;let _=l;l=c(n,f),l===_?~l&&u[l].p(n,f):(t&&(fe(),U(u[_],1,1,()=>{u[_]=null}),ue()),~l?(t=u[l],t?t.p(n,f):(t=u[l]=r[l](n),t.c()),O(t,1),t.m(s.parentNode,s)):t=null)},i(o){i||(O(t),i=!0)},o(o){U(t),i=!1},d(o){~l&&u[l].d(o),o&&m(s)}}}function yl(n){let e,l,t,s=n[0]&&typeof n[0]=="object"&&Object.keys(n[0]).length>0,i,a=n[8]&&rt(),r=s&&ot(n);return{c(){e=q("section"),a&&a.c(),l=Y(),t=q("div"),r&&r.c()},l(u){e=A(u,"SECTION",{});var c=C(e);a&&a.l(c),l=Q(c),t=A(c,"DIV",{});var o=C(t);r&&r.l(o),o.forEach(m),c.forEach(m)},m(u,c){P(u,e,c),a&&a.m(e,null),M(e,l),M(e,t),r&&r.m(t,null),n[18](e),i=!0},p(u,[c]){u[8]?a||(a=rt(),a.c(),a.m(e,l)):a&&(a.d(1),a=null),c&1&&(s=u[0]&&typeof u[0]=="object"&&Object.keys(u[0]).length>0),s?r?(r.p(u,c),c&1&&O(r,1)):(r=ot(u),r.c(),O(r,1),r.m(t,null)):r&&(fe(),U(r,1,1,()=>{r=null}),ue())},i(u){i||(O(r),i=!0)},o(u){U(r),i=!1},d(u){u&&m(e),a&&a.d(),r&&r.d(),n[18](null)}}}function Il(n){let e=document.querySelector(`#col_${n}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function wl(n,e){return e.filter(l=>!n.some(t=>t.target===l.target||t.id===l.target))}function El(n,e,l){let t,s=j,i=()=>(s(),s=We(_,S=>l(20,t=S)),_),a;ne(n,de,S=>l(21,a=S)),n.$$.on_destroy.push(()=>s());let{category:r}=e,{data:u}=e,{newData:c}=e,{dataLen:o}=e,{entities:f}=e,{updatePosition:_}=e;i();let{index:d}=e,{loadData:I}=e,{defaultNodes:T}=e,{batchSize:N}=e,{essaysItems:L}=e,{site:V}=e,p,b,y={nodes:[],links:[]};async function w(S,X){Il(X),l(8,b=!0),a.splice(X,a.length-X);let Z=a.map(k=>k.data).flat();const B=await(await fetch(S.target)).json();if(B!=null&&B["o:items"]&&a.length==1){let k=[];const z=B["o:items"]["@id"];(await(await fetch(z)).json()).forEach(te=>{k.push(te)});let R=k.map(te=>({"o:title":te["o:title"],"@id":te["@id"],thumbnail_display_urls:te.thumbnail_display_urls}));B.related={...R}}y=await Ct([{data:B}]);let $=y.links.filter(k=>k.source===S.target||k.target===S.target),g=wl([...T,...Z],$),v=$.slice(0,N);se(de,a[X]={id:S.target,data:$.sort((k,z)=>{if(k.property)return k.property.localeCompare(z.property)}),page:0,new:g,paginate:v},a),l(8,b=!1),g.length>0&&I(v,N),se(_,t=!0,t)}const E=(S,X)=>(X==null?void 0:X.title)===S.title,D=S=>{w(S,d+1)},G=S=>{w(S,d+1)};function F(S){we[S?"unshift":"push"](()=>{p=S,l(7,p)})}return n.$$set=S=>{"category"in S&&l(10,r=S.category),"data"in S&&l(0,u=S.data),"newData"in S&&l(1,c=S.newData),"dataLen"in S&&l(11,o=S.dataLen),"entities"in S&&l(2,f=S.entities),"updatePosition"in S&&i(l(3,_=S.updatePosition)),"index"in S&&l(4,d=S.index),"loadData"in S&&l(12,I=S.loadData),"defaultNodes"in S&&l(13,T=S.defaultNodes),"batchSize"in S&&l(14,N=S.batchSize),"essaysItems"in S&&l(5,L=S.essaysItems),"site"in S&&l(6,V=S.site)},[u,c,f,_,d,L,V,p,b,w,r,o,I,T,N,E,D,G,F]}class Vt extends Ee{constructor(e){super(),Pe(this,e,El,yl,Se,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function ct(n,e,l){const t=n.slice();return t[32]=e[l],t[34]=l,t}function Ye(n){const e=n.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(i=>i.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(i=>i.props.includes(s.property))).length;return e[36]=t,e}function dt(n,e,l){const t=n.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...r){return n[20](t[37],...r)});t[38]=s;const i=t[32].data.filter(function(...r){return n[21](t[37],...r)}).length;return t[36]=i,t}function Pl(n){let e,l,t=n[5],s=[];for(let a=0;a<t.length;a+=1)s[a]=bt(ct(n,t,a));const i=a=>U(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=W()},l(a){for(let r=0;r<s.length;r+=1)s[r].l(a);e=W()},m(a,r){for(let u=0;u<s.length;u+=1)s[u].m(a,r);P(a,e,r),l=!0},p(a,r){if(r[0]&16063){t=a[5];let u;for(u=0;u<t.length;u+=1){const c=ct(a,t,u);s[u]?(s[u].p(c,r),O(s[u],1)):(s[u]=bt(c),s[u].c(),O(s[u],1),s[u].m(e.parentNode,e))}for(fe(),u=t.length;u<s.length;u+=1)i(u);ue()}},i(a){if(!l){for(let r=0;r<t.length;r+=1)O(s[r]);l=!0}},o(a){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)U(s[r]);l=!1},d(a){qe(s,a),a&&m(e)}}}function Sl(n){let e,l,t;return{c(){e=q("div"),l=q("h4"),t=x("Loading Graph..."),this.h()},l(s){e=A(s,"DIV",{});var i=C(e);l=A(i,"H4",{class:!0});var a=C(l);t=ee(a,"Loading Graph..."),a.forEach(m),i.forEach(m),this.h()},h(){h(l,"class","loading svelte-d0zru6")},m(s,i){P(s,e,i),M(e,l),M(l,t)},p:j,i:j,o:j,d(s){s&&m(e)}}}function Tl(n){let e,l;return{c(){e=q("div"),l=x("There are no connections."),this.h()},l(t){e=A(t,"DIV",{class:!0});var s=C(e);l=ee(s,"There are no connections."),s.forEach(m),this.h()},h(){h(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),M(e,l)},p:j,i:j,o:j,d(t){t&&m(e)}}}function Dl(n){let e,l,t=n[32].paginate.filter(n[19]).length>0,s,i,a=n[3].mainCategories,r=[];for(let f=0;f<a.length;f+=1)r[f]=ht(dt(n,a,f));const u=f=>U(r[f],1,1,()=>{r[f]=null});let c=t&&mt(Ye(n)),o=n[32].paginate.length<n[32].new.length&&gt(n);return{c(){e=q("div");for(let f=0;f<r.length;f+=1)r[f].c();l=Y(),c&&c.c(),s=Y(),o&&o.c()},l(f){e=A(f,"DIV",{});var _=C(e);for(let d=0;d<r.length;d+=1)r[d].l(_);l=Q(_),c&&c.l(_),s=Q(_),o&&o.l(_),_.forEach(m)},m(f,_){P(f,e,_);for(let d=0;d<r.length;d+=1)r[d].m(e,null);M(e,l),c&&c.m(e,null),M(e,s),o&&o.m(e,null),i=!0},p(f,_){if(_[0]&7725){a=f[3].mainCategories;let d;for(d=0;d<a.length;d+=1){const I=dt(f,a,d);r[d]?(r[d].p(I,_),O(r[d],1)):(r[d]=ht(I),r[d].c(),O(r[d],1),r[d].m(e,l))}for(fe(),d=a.length;d<r.length;d+=1)u(d);ue()}_[0]&40&&(t=f[32].paginate.filter(f[19]).length>0),t?c?(c.p(Ye(f),_),_[0]&40&&O(c,1)):(c=mt(Ye(f)),c.c(),O(c,1),c.m(e,s)):c&&(fe(),U(c,1,1,()=>{c=null}),ue()),f[32].paginate.length<f[32].new.length?o?o.p(f,_):(o=gt(f),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(f){if(!i){for(let _=0;_<a.length;_+=1)O(r[_]);O(c),i=!0}},o(f){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)U(r[_]);U(c),i=!1},d(f){f&&m(e),qe(r,f),c&&c.d(),o&&o.d()}}}function _t(n){let e,l;return e=new Vt({props:{site:n[3].publicSite,essaysItems:n[2],category:n[37].key,data:n[38],newData:n[32].new,dataLen:n[36],index:n[34],entities:n[9],updatePosition:n[0],batchSize:n[10],defaultNodes:[...n[11]],loadData:n[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const i={};s[0]&8&&(i.site=t[3].publicSite),s[0]&4&&(i.essaysItems=t[2]),s[0]&8&&(i.category=t[37].key),s[0]&40&&(i.data=t[38]),s[0]&32&&(i.newData=t[32].new),s[0]&40&&(i.dataLen=t[36]),s[0]&1&&(i.updatePosition=t[0]),e.$set(i)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function ht(n){let e,l,t=n[38].length>0&&_t(n);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,i){t&&t.m(s,i),P(s,e,i),l=!0},p(s,i){s[38].length>0?t?(t.p(s,i),i[0]&40&&O(t,1)):(t=_t(s),t.c(),O(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(O(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function mt(n){let e,l,t=n[35].length>0&&pt(n);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,i){t&&t.m(s,i),P(s,e,i),l=!0},p(s,i){s[35].length>0?t?(t.p(s,i),i[0]&40&&O(t,1)):(t=pt(s),t.c(),O(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ue())},i(s){l||(O(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&m(e)}}}function pt(n){let e,l;return e=new Vt({props:{site:n[3].publicSite,essaysItems:n[2],category:"",data:n[35],newData:n[32].new,dataLen:n[36],index:n[34],entities:n[9],updatePosition:n[0],batchSize:n[10],defaultNodes:[...n[11]],loadData:n[12]}}),{c(){he(e.$$.fragment)},l(t){me(e.$$.fragment,t)},m(t,s){pe(e,t,s),l=!0},p(t,s){const i={};s[0]&8&&(i.site=t[3].publicSite),s[0]&4&&(i.essaysItems=t[2]),s[0]&40&&(i.data=t[35]),s[0]&32&&(i.newData=t[32].new),s[0]&40&&(i.dataLen=t[36]),s[0]&1&&(i.updatePosition=t[0]),e.$set(i)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function gt(n){let e,l,t,s;return{c(){e=q("div"),l=x("Load more"),this.h()},l(i){e=A(i,"DIV",{class:!0});var a=C(e);l=ee(a,"Load more"),a.forEach(m),this.h()},h(){h(e,"class","more svelte-d0zru6")},m(i,a){P(i,e,a),M(e,l),t||(s=[K(e,"click",function(){Qe(n[13](n[34],n[7]))&&n[13](n[34],n[7]).apply(this,arguments)}),K(e,"keydown",function(){Qe(n[13](n[34],n[7]))&&n[13](n[34],n[7]).apply(this,arguments)})],t=!0)},p(i,a){n=i},d(i){i&&m(e),t=!1,ze(s)}}}function bt(n){let e,l,t,s,i,a,r;const u=[Dl,Tl],c=[];function o(f,_){var d,I;return(d=f[32])!=null&&d.new&&((I=f[32])==null?void 0:I.new.length)>0?0:1}return l=o(n),t=c[l]=u[l](n),{c(){e=q("div"),t.c(),s=Y(),this.h()},l(f){e=A(f,"DIV",{class:!0,id:!0});var _=C(e);t.l(_),s=Q(_),_.forEach(m),this.h()},h(){h(e,"class","links svelte-d0zru6"),h(e,"id","col_"+n[34])},m(f,_){P(f,e,_),c[l].m(e,null),M(e,s),n[22](e),i=!0,a||(r=[K(e,"scroll",n[23]),K(e,"click",n[24]),K(e,"keypress",n[25])],a=!0)},p(f,_){let d=l;l=o(f),l===d?c[l].p(f,_):(fe(),U(c[d],1,1,()=>{c[d]=null}),ue(),t=c[l],t?t.p(f,_):(t=c[l]=u[l](f),t.c()),O(t,1),t.m(e,s))},i(f){i||(O(t),i=!0)},o(f){U(t),i=!1},d(f){f&&m(e),c[l].d(),n[22](null),a=!1,ze(r)}}}function vt(n){let e,l,t,s;return{c(){e=q("div"),l=x("✕"),this.h()},l(i){e=A(i,"DIV",{class:!0});var a=C(e);l=ee(a,"✕"),a.forEach(m),this.h()},h(){h(e,"class","close svelte-d0zru6")},m(i,a){P(i,e,a),M(e,l),t||(s=[K(e,"click",n[27]),K(e,"keypress",n[28])],t=!0)},p:j,d(i){i&&m(e),t=!1,ze(s)}}}function Ll(n){let e,l,t,s,i,a;const r=[Sl,Pl],u=[];function c(f,_){return f[8].length==0?0:1}l=c(n),t=u[l]=r[l](n);let o=n[5].length>1&&vt(n);return{c(){e=q("div"),t.c(),s=Y(),o&&o.c(),i=W(),this.h()},l(f){e=A(f,"DIV",{class:!0});var _=C(e);t.l(_),_.forEach(m),s=Q(f),o&&o.l(f),i=W(),this.h()},h(){h(e,"class","graph svelte-d0zru6")},m(f,_){P(f,e,_),u[l].m(e,null),n[26](e),P(f,s,_),o&&o.m(f,_),P(f,i,_),a=!0},p(f,_){let d=l;l=c(f),l===d?u[l].p(f,_):(fe(),U(u[d],1,1,()=>{u[d]=null}),ue(),t=u[l],t?t.p(f,_):(t=u[l]=r[l](f),t.c()),O(t,1),t.m(e,null)),f[5].length>1?o?o.p(f,_):(o=vt(f),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i(f){a||(O(t),a=!0)},o(f){U(t),a=!1},d(f){f&&m(e),u[l].d(),n[26](null),f&&m(s),o&&o.d(f),f&&m(i)}}}function Nl(n,e,l){const t=l-e;return(n-e)/t*100}function zl(n,e,l){const t=l-e;return e+t*n/100}function ql(n,e,l){let t,s,i,a;ne(n,Ne,k=>l(30,s=k)),ne(n,de,k=>l(5,i=k));let{updatePosition:r}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:o}=e,{essaysItems:f}=e,{config:_}=e,{items:d}=e,{screenSize:I}=e,T;const N=ve([]);ne(n,N,k=>l(8,a=k));let L=_.batch,V,p=c.nodes.filter(k=>o.includes(k.id));Ke(async()=>{b(c.nodes,L)}),zt(()=>{V.lastElementChild&&I>600&&V.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function b(k,z){const J=k.map(R=>{var re,H;return(((re=R==null?void 0:R.id)==null?void 0:re.split("/"))||((H=R==null?void 0:R.target)==null?void 0:H.split("/"))).slice(-1)[0]}),ie=Math.ceil(J.length/z);for(let R=0;R<ie;R++){const te=J.slice(R*z,(R+1)*z);let re=`${_.api}/items?${te.map(ae=>`id[]=${ae}`).join("&")}`,H=await fetch(re),oe=await H.json();N.update(ae=>(ae.includes(...oe)||ae.push(...oe),ae)),oe.length!=te.length&&(re=`${_.api}/media?${te.map(ae=>`id[]=${ae}`).join("&")}`,H=await fetch(re),oe=await H.json(),N.update(ae=>(ae.includes(...oe)||ae.push(...oe),ae)))}}let y;const w=(k,z)=>{var J,ie,R,te,re;if(z!=null){const H=((J=i[k])==null?void 0:J.page)+1||0;se(de,i[k]={...i[k],page:H,paginate:(ie=i[k])==null?void 0:ie.data.slice(0,H*L)},i),(R=i[k])!=null&&R.data&&((te=i[k])==null?void 0:te.paginate.length)!=((re=i[k])==null?void 0:re.data.length)&&b(i[k].paginate.slice(-L),L)}};let E=0;function D(k){var z,J,ie,R,te,re;if(s){const H=document.querySelectorAll(".links:first-of-type .node");let oe=(z=H==null?void 0:H[E])==null?void 0:z.offsetTop,ae=(J=H==null?void 0:H[E])==null?void 0:J.getAttribute("data-id"),_e=(ie=H==null?void 0:H[E+1])==null?void 0:ie.offsetTop,ke=(R=H==null?void 0:H[E+1])==null?void 0:R.getAttribute("data-id"),Ae=(te=document.querySelector(`.node-highlite[data-id="${ae}"]`))==null?void 0:te.offsetTop,Me=(re=document.querySelector(`.node-highlite[data-id="${ke}"]`))==null?void 0:re.offsetTop,Oe=Nl(k,oe,_e),Te=zl(Oe,Ae,Me);const Ce=document.querySelector(".markdown__container");k>_e&&E++,k<oe&&E!=0&&E--,Ce&&Te&&oe!==_e&&Te>0&&(Ce==null||Ce.scrollTo({top:Te}))}}const G=k=>!_.mainCategories.some(z=>z.props.includes(k.property)),F=(k,z)=>k.props.includes(z.property),S=(k,z)=>k.props.includes(z.property);function X(k){we[k?"unshift":"push"](()=>{y=k,l(7,y)})}const Z=()=>{let k=document.querySelector("#col_0");k.addEventListener("scroll",z=>{l(4,T=k==null?void 0:k.scrollTop)}),u()},le=()=>{u()},B=()=>{u()};function $(k){we[k?"unshift":"push"](()=>{V=k,l(6,V)})}const g=()=>{se(de,i=[],i),u()},v=()=>{se(de,i=[],i)};return n.$$set=k=>{"updatePosition"in k&&l(0,r=k.updatePosition),"handlePosition"in k&&l(1,u=k.handlePosition),"data"in k&&l(14,c=k.data),"visibleItemsID"in k&&l(15,o=k.visibleItemsID),"essaysItems"in k&&l(2,f=k.essaysItems),"config"in k&&l(3,_=k.config),"items"in k&&l(16,d=k.items),"screenSize"in k&&l(17,I=k.screenSize)},n.$$.update=()=>{var k;n.$$.dirty[0]&65544&&l(18,t=d.filter(z=>z==null?void 0:z.data).map(z=>{var J,ie;return{img:(J=z.data)==null?void 0:J.thumbnail_display_urls.large,source:`item_${z.id}`,target:`${_.api}/resources/${z.id}`,title:((ie=z.data)==null?void 0:ie["o:title"])||""}})),n.$$.dirty[0]&262176&&(i&&i.length==0||de&&((k=i==null?void 0:i[0])==null?void 0:k.data.length)==0)&&se(de,i[0]={data:t,new:t,page:0,paginate:t},i),n.$$.dirty[0]&16&&D(T)},[r,u,f,_,T,i,V,y,a,N,L,p,b,w,c,o,d,I,t,G,F,S,X,Z,le,B,$,g,v]}class Al extends Ee{constructor(e){super(),Pe(this,e,ql,Ll,Se,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function kt(n,e,l){const t=n.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function yt(n,e,l){const t=n.slice();return t[6]=e[l],t}function It(n){let e,l,t=Object.entries(n[0]),s=[];for(let i=0;i<t.length;i+=1)s[i]=Lt(kt(n,t,i));return{c(){e=ye("svg"),l=ye("g");for(let i=0;i<s.length;i+=1)s[i].c();this.h()},l(i){e=Ie(i,"svg",{class:!0});var a=C(e);l=Ie(a,"g",{});var r=C(l);for(let u=0;u<s.length;u+=1)s[u].l(r);r.forEach(m),a.forEach(m),this.h()},h(){h(e,"class","svelte-1ddz0y9")},m(i,a){P(i,e,a),M(e,l);for(let r=0;r<s.length;r+=1)s[r].m(l,null)},p(i,a){if(a&3){t=Object.entries(i[0]);let r;for(r=0;r<t.length;r+=1){const u=kt(i,t,r);s[r]?s[r].p(u,a):(s[r]=Lt(u),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(i){i&&m(e),qe(s,i)}}}function wt(n){let e,l,t=n[6].label+"",s,i,a,r,u,c,o,f,_=n[6].label+"",d,I,T,N,L,V,p=n[6].reverse&&n[6].label&&Et(),b=!n[6].reverse&&n[6].label&&Pt(),y=n[6].reverse&&n[6].label&&St(),w=!n[6].reverse&&n[6].label&&Tt();return{c(){e=ye("text"),l=ye("textPath"),s=x(t),p&&p.c(),i=W(),b&&b.c(),o=ye("text"),f=ye("textPath"),d=x(_),y&&y.c(),I=W(),w&&w.c(),this.h()},l(E){e=Ie(E,"text",{class:!0,source:!0,target:!0});var D=C(e);l=Ie(D,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var G=C(l);s=ee(G,t),p&&p.l(G),i=W(),b&&b.l(G),G.forEach(m),D.forEach(m),o=Ie(E,"text",{class:!0,source:!0,target:!0});var F=C(o);f=Ie(F,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var S=C(f);d=ee(S,_),y&&y.l(S),I=W(),w&&w.l(S),S.forEach(m),F.forEach(m),this.h()},h(){h(l,"alignment-baseline","middle"),h(l,"href",a="#path_"+n[2]),h(l,"startOffset","99%"),h(l,"text-anchor","end"),h(e,"class",r="background "+n[6].class+" svelte-1ddz0y9"),h(e,"source",u=n[6].datum.source),h(e,"target",c=n[6].datum.target),h(f,"alignment-baseline","middle"),h(f,"href",T="#path_"+n[2]),h(f,"startOffset","99%"),h(f,"text-anchor","end"),h(o,"class",N=He(n[6].class)+" svelte-1ddz0y9"),h(o,"source",L=n[6].datum.source),h(o,"target",V=n[6].datum.target)},m(E,D){P(E,e,D),M(e,l),M(l,s),p&&p.m(l,null),M(l,i),b&&b.m(l,null),P(E,o,D),M(o,f),M(f,d),y&&y.m(f,null),M(f,I),w&&w.m(f,null)},p(E,D){D&1&&t!==(t=E[6].label+"")&&be(s,t),E[6].reverse&&E[6].label?p||(p=Et(),p.c(),p.m(l,i)):p&&(p.d(1),p=null),!E[6].reverse&&E[6].label?b||(b=Pt(),b.c(),b.m(l,null)):b&&(b.d(1),b=null),D&1&&a!==(a="#path_"+E[2])&&h(l,"href",a),D&1&&r!==(r="background "+E[6].class+" svelte-1ddz0y9")&&h(e,"class",r),D&1&&u!==(u=E[6].datum.source)&&h(e,"source",u),D&1&&c!==(c=E[6].datum.target)&&h(e,"target",c),D&1&&_!==(_=E[6].label+"")&&be(d,_),E[6].reverse&&E[6].label?y||(y=St(),y.c(),y.m(f,I)):y&&(y.d(1),y=null),!E[6].reverse&&E[6].label?w||(w=Tt(),w.c(),w.m(f,null)):w&&(w.d(1),w=null),D&1&&T!==(T="#path_"+E[2])&&h(f,"href",T),D&1&&N!==(N=He(E[6].class)+" svelte-1ddz0y9")&&h(o,"class",N),D&1&&L!==(L=E[6].datum.source)&&h(o,"source",L),D&1&&V!==(V=E[6].datum.target)&&h(o,"target",V)},d(E){E&&m(e),p&&p.d(),b&&b.d(),E&&m(o),y&&y.d(),w&&w.d()}}}function Et(n){let e;return{c(){e=x(" -")},l(l){e=ee(l," -")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Pt(n){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function St(n){let e;return{c(){e=x("←")},l(l){e=ee(l,"←")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Tt(n){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){P(l,e,t)},d(l){l&&m(e)}}}function Dt(n){let e,l,t,s,i,a,r=(n[1]==n[6].datum.source&&n[6].selected!="not-selected"||n[1]==n[6].datum.target)&&wt(n);return{c(){e=ye("path"),r&&r.c(),a=W(),this.h()},l(u){e=Ie(u,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),C(e).forEach(m),r&&r.l(u),a=W(),this.h()},h(){h(e,"id",l="path_"+n[2]),h(e,"class",t=He(n[6].class)+" svelte-1ddz0y9"),h(e,"data-attr",s=n[6].selected),h(e,"d",i=n[6].d)},m(u,c){P(u,e,c),r&&r.m(u,c),P(u,a,c)},p(u,c){c&1&&l!==(l="path_"+u[2])&&h(e,"id",l),c&1&&t!==(t=He(u[6].class)+" svelte-1ddz0y9")&&h(e,"class",t),c&1&&s!==(s=u[6].selected)&&h(e,"data-attr",s),c&1&&i!==(i=u[6].d)&&h(e,"d",i),u[1]==u[6].datum.source&&u[6].selected!="not-selected"||u[1]==u[6].datum.target?r?r.p(u,c):(r=wt(u),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(u){u&&m(e),r&&r.d(u),u&&m(a)}}}function Lt(n){let e,l=n[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Dt(yt(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=W()},m(s,i){for(let a=0;a<t.length;a+=1)t[a].m(s,i);P(s,e,i)},p(s,i){if(i&3){l=s[3];let a;for(a=0;a<l.length;a+=1){const r=yt(s,l,a);t[a]?t[a].p(r,i):(t[a]=Dt(r),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},d(s){qe(t,s),s&&m(e)}}}function Ml(n){let e=Object.keys(n[0]).length>0,l,t=e&&It(n);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,i){t&&t.m(s,i),P(s,l,i)},p(s,[i]){i&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,i):(t=It(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(s){t&&t.d(s),s&&m(l)}}}function Ol(n,e,l){let t,s;return ne(n,Ge,i=>l(0,t=i)),ne(n,Je,i=>l(1,s=i)),[t,s]}class Cl extends Ee{constructor(e){super(),Pe(this,e,Ol,Ml,Se,{})}}function Vl(n){let e,l,t,s,i,a,r,u,c,o,f;return t=new sl({props:{data:n[2],items:n[4],scrollTopVal:n[8]}}),a=new Al({props:{items:n[4],data:n[10],screenSize:n[0],essaysItems:n[6],visibleItemsID:n[5],handlePosition:n[14],updatePosition:n[13],config:Xt}}),u=new Cl({}),{c(){e=q("article"),l=q("section"),he(t.$$.fragment),s=Y(),i=q("section"),he(a.$$.fragment),r=Y(),he(u.$$.fragment),this.h()},l(_){e=A(_,"ARTICLE",{style:!0,class:!0});var d=C(e);l=A(d,"SECTION",{class:!0});var I=C(l);me(t.$$.fragment,I),I.forEach(m),s=Q(d),i=A(d,"SECTION",{class:!0});var T=C(i);me(a.$$.fragment,T),T.forEach(m),r=Q(d),me(u.$$.fragment,d),d.forEach(m),this.h()},h(){var _;h(l,"class","markdown__container svelte-15zdm0q"),h(i,"class","graph__container svelte-15zdm0q"),je(e,"--theme-color",((_=n[2].meta)==null?void 0:_.color)||"blue"),h(e,"class","svelte-15zdm0q")},m(_,d){P(_,e,d),M(e,l),pe(t,l,null),n[19](l),M(e,s),M(e,i),pe(a,i,null),M(e,r),pe(u,e,null),n[26](e),c=!0,o||(f=[K(l,"wheel",n[20],{passive:!0}),K(l,"scroll",n[21]),K(i,"wheel",n[22],{passive:!0}),K(e,"resize",n[14]),K(e,"scroll",n[23]),K(e,"touchmove",n[24],{passive:!0}),K(e,"click",n[25]),K(e,"keypress",n[17])],o=!0)},p(_,d){var N;const I={};d&4&&(I.data=_[2]),d&16&&(I.items=_[4]),d&256&&(I.scrollTopVal=_[8]),t.$set(I);const T={};d&16&&(T.items=_[4]),d&1024&&(T.data=_[10]),d&1&&(T.screenSize=_[0]),d&64&&(T.essaysItems=_[6]),d&32&&(T.visibleItemsID=_[5]),a.$set(T),(!c||d&4)&&je(e,"--theme-color",((N=_[2].meta)==null?void 0:N.color)||"blue")},i(_){c||(O(t.$$.fragment,_),O(a.$$.fragment,_),O(u.$$.fragment,_),c=!0)},o(_){U(t.$$.fragment,_),U(a.$$.fragment,_),U(u.$$.fragment,_),c=!1},d(_){_&&m(e),ge(t),n[19](null),ge(a),ge(u),n[26](null),o=!1,ze(f)}}}function Bl(n){let e,l,t,s;return{c(){e=q("article"),l=q("section"),t=q("h4"),s=x("Loading..."),this.h()},l(i){e=A(i,"ARTICLE",{class:!0});var a=C(e);l=A(a,"SECTION",{class:!0});var r=C(l);t=A(r,"H4",{});var u=C(t);s=ee(u,"Loading..."),u.forEach(m),r.forEach(m),a.forEach(m),this.h()},h(){h(l,"class","short_text svelte-15zdm0q"),h(e,"class","svelte-15zdm0q")},m(i,a){P(i,e,a),M(e,l),M(l,t),M(t,s)},p:j,i:j,o:j,d(i){i&&m(e)}}}function Fl(n){let e,l,t,s;return{c(){e=q("article"),l=q("section"),t=q("h4"),s=x("404 Page not found"),this.h()},l(i){e=A(i,"ARTICLE",{class:!0});var a=C(e);l=A(a,"SECTION",{class:!0});var r=C(l);t=A(r,"H4",{});var u=C(t);s=ee(u,"404 Page not found"),u.forEach(m),r.forEach(m),a.forEach(m),this.h()},h(){h(l,"class","short_text svelte-15zdm0q"),h(e,"class","svelte-15zdm0q")},m(i,a){P(i,e,a),M(e,l),M(l,t),M(t,s)},p:j,i:j,o:j,d(i){i&&m(e)}}}function Nt(n){var B,$;let e,l,t,s,i,a,r,u,c,o,f,_,d,I,T,N,L,V,p,b,y,w,E,D,G,F,S,X,Z,le;return document.title=e=(($=(B=n[2])==null?void 0:B.meta)==null?void 0:$.title)||De,{c(){l=Y(),t=q("meta"),i=Y(),a=q("meta"),u=Y(),c=q("meta"),f=Y(),_=q("meta"),I=Y(),T=q("meta"),L=Y(),V=q("meta"),p=Y(),b=q("meta"),w=Y(),E=q("meta"),G=Y(),F=q("meta"),X=Y(),Z=q("meta"),this.h()},l(g){l=Q(g),t=A(g,"META",{name:!0,content:!0}),i=Q(g),a=A(g,"META",{property:!0,content:!0}),u=Q(g),c=A(g,"META",{property:!0,content:!0}),f=Q(g),_=A(g,"META",{property:!0,content:!0}),I=Q(g),T=A(g,"META",{property:!0,content:!0}),L=Q(g),V=A(g,"META",{name:!0,content:!0}),p=Q(g),b=A(g,"META",{property:!0,content:!0}),w=Q(g),E=A(g,"META",{name:!0,content:!0}),G=Q(g),F=A(g,"META",{name:!0,content:!0}),X=Q(g),Z=A(g,"META",{name:!0,content:!0}),this.h()},h(){var g,v,k,z,J,ie,R,te,re,H,oe,ae,_e,ke;h(t,"name","description"),h(t,"content",s=((v=(g=n[2])==null?void 0:g.meta)==null?void 0:v.description)||Le),h(a,"property","og:url"),h(a,"content",r=n[9].url.origin),h(c,"property","og:title"),h(c,"content",o=((z=(k=n[2])==null?void 0:k.meta)==null?void 0:z.title)||De),h(_,"property","og:description"),h(_,"content",d=((ie=(J=n[2])==null?void 0:J.meta)==null?void 0:ie.description)||Le),h(T,"property","og:image"),h(T,"content",N=((te=(R=n[2])==null?void 0:R.meta)==null?void 0:te.cover)||Be),h(V,"name","twitter:card"),h(V,"content","summary_large_image"),h(b,"property","twitter:url"),h(b,"content",y=n[9].url.origin),h(E,"name","twitter:title"),h(E,"content",D=((H=(re=n[2])==null?void 0:re.meta)==null?void 0:H.title)||De),h(F,"name","twitter:description"),h(F,"content",S=((ae=(oe=n[2])==null?void 0:oe.meta)==null?void 0:ae.description)||Le),h(Z,"name","twitter:image"),h(Z,"content",le=((ke=(_e=n[2])==null?void 0:_e.meta)==null?void 0:ke.cover)||Be)},m(g,v){P(g,l,v),P(g,t,v),P(g,i,v),P(g,a,v),P(g,u,v),P(g,c,v),P(g,f,v),P(g,_,v),P(g,I,v),P(g,T,v),P(g,L,v),P(g,V,v),P(g,p,v),P(g,b,v),P(g,w,v),P(g,E,v),P(g,G,v),P(g,F,v),P(g,X,v),P(g,Z,v)},p(g,v){var k,z,J,ie,R,te,re,H,oe,ae,_e,ke,Ae,Me,Oe,Te;v&4&&e!==(e=((z=(k=g[2])==null?void 0:k.meta)==null?void 0:z.title)||De)&&(document.title=e),v&4&&s!==(s=((ie=(J=g[2])==null?void 0:J.meta)==null?void 0:ie.description)||Le)&&h(t,"content",s),v&512&&r!==(r=g[9].url.origin)&&h(a,"content",r),v&4&&o!==(o=((te=(R=g[2])==null?void 0:R.meta)==null?void 0:te.title)||De)&&h(c,"content",o),v&4&&d!==(d=((H=(re=g[2])==null?void 0:re.meta)==null?void 0:H.description)||Le)&&h(_,"content",d),v&4&&N!==(N=((ae=(oe=g[2])==null?void 0:oe.meta)==null?void 0:ae.cover)||Be)&&h(T,"content",N),v&512&&y!==(y=g[9].url.origin)&&h(b,"content",y),v&4&&D!==(D=((ke=(_e=g[2])==null?void 0:_e.meta)==null?void 0:ke.title)||De)&&h(E,"content",D),v&4&&S!==(S=((Me=(Ae=g[2])==null?void 0:Ae.meta)==null?void 0:Me.description)||Le)&&h(F,"content",S),v&4&&le!==(le=((Te=(Oe=g[2])==null?void 0:Oe.meta)==null?void 0:Te.cover)||Be)&&h(Z,"content",le)},d(g){g&&m(l),g&&m(t),g&&m(i),g&&m(a),g&&m(u),g&&m(c),g&&m(f),g&&m(_),g&&m(I),g&&m(T),g&&m(L),g&&m(V),g&&m(p),g&&m(b),g&&m(w),g&&m(E),g&&m(G),g&&m(F),g&&m(X),g&&m(Z)}}}function Gl(n){let e,l,t,s,i,a,r,u;Ft(n[18]);const c=[Fl,Bl,Vl],o=[];function f(d,I){return d[2]==null&&d[3]==null?0:d[3]==null?1:2}l=f(n),t=o[l]=c[l](n);let _=n[2]!=null&&Nt(n);return{c(){e=q("div"),t.c(),s=Y(),_&&_.c(),i=W()},l(d){e=A(d,"DIV",{});var I=C(e);t.l(I),I.forEach(m),s=Q(d);const T=Gt("svelte-hn2qma",document.head);_&&_.l(T),i=W(),T.forEach(m)},m(d,I){P(d,e,I),o[l].m(e,null),P(d,s,I),_&&_.m(document.head,null),M(document.head,i),a=!0,r||(u=[K(window,"resize",n[14]),K(window,"click",n[14]),K(window,"resize",n[18])],r=!0)},p(d,[I]){let T=l;l=f(d),l===T?o[l].p(d,I):(fe(),U(o[T],1,1,()=>{o[T]=null}),ue(),t=o[l],t?t.p(d,I):(t=o[l]=c[l](d),t.c()),O(t,1),t.m(e,null)),d[2]!=null?_?_.p(d,I):(_=Nt(d),_.c(),_.m(i.parentNode,i)):_&&(_.d(1),_=null)},i(d){a||(O(t),a=!0)},o(d){U(t),a=!1},d(d){d&&m(e),o[l].d(),d&&m(s),_&&_.d(d),m(i),r=!1,ze(u)}}}function Ul(n,e,l){let t,s,i,a,r,u;ne(n,Ht,B=>l(9,t=B)),ne(n,$e,B=>l(10,s=B)),ne(n,Je,B=>l(16,i=B)),ne(n,Ue,B=>l(11,r=B)),ne(n,Ne,B=>l(12,u=B));let{data:c}=e,o,f,_=[],d,I,T=[],N=[],L,V;const p=ve(!1);ne(n,p,B=>l(27,a=B));const b=()=>{se(p,a=!0,a)};Ke(async()=>{l(2,_=[...c.posts].find($=>$.path.includes(t.params.slug))),l(4,I=await ml(_.text)),l(5,T=I.filter($=>!$.set).map($=>{var g;return`${ce}/resources/${(g=$.data)==null?void 0:g["o:id"]}`})),l(3,d=await Ct(I)),se($e,s=d,s);const B=localStorage.getItem("selectedLanguage");l(6,N=c.posts.reduce(($,g)=>(!g.path.includes(t.params.slug)&&g.meta.lang==B&&g.links.map(v=>{const k=$.find(J=>J.id===v),z={title:g.meta.title,url:g.path};k?k.essays.some(J=>J.title===z.title&&J.url===z.url)||k.essays.push(z):$.push({id:v,essays:[z]})}),$),[]))});function y(B){Fe.call(this,n,B)}function w(){l(0,o=window.innerWidth)}function E(B){we[B?"unshift":"push"](()=>{f=B,l(1,f)})}const D=()=>{b(),se(Ne,u=!1,u),l(8,V=f==null?void 0:f.scrollTop)},G=()=>{o<1e3&&(b(),l(8,V=f==null?void 0:f.scrollTop),se(Ne,u=!1,u))},F=()=>{o>1e3&&se(Ne,u=!0,u)},S=()=>{se(Ue,r=L==null?void 0:L.scrollLeft,r)},X=()=>{se(Ue,r=L==null?void 0:L.scrollLeft,r),b()},Z=()=>{b()};function le(B){we[B?"unshift":"push"](()=>{L=B,l(7,L)})}return n.$$set=B=>{"data"in B&&l(15,c=B.data)},n.$$.update=()=>{n.$$.dirty&65536&&b()},[o,f,_,d,I,T,N,L,V,t,s,r,u,p,b,c,i,y,w,E,D,G,F,S,X,Z,le]}class Zl extends Ee{constructor(e){super(),Pe(this,e,Ul,Gl,Se,{data:15})}}export{Zl as component,Ql as universal};
